!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.db=void 0;const r=new(n(9).PrismaClient);t.db=r},function(e,t){e.exports=require("@fastify/aws-lambda")},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(3)),s=r(n(4)),a=n(5);class o{constructor(){this.server=(0,s.default)({logger:!0}),this.middlewares(),this.routes()}async middlewares(){await this.server.register(i.default,{origin:!0})}routes(){this.server.register(a.productRoutes,{prefix:"/product"}),this.server.register(a.messageRoutes,{prefix:"/message"}),this.server.register(a.typesRoutes,{prefix:"/types"})}static get Instance(){return this._instance||(this._instance=new this)}}var u,d,l;u=o,l=void 0,(d=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(d="_instance"))in u?Object.defineProperty(u,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[d]=l,t.default=o},function(e,t){e.exports=require("@fastify/cors")},function(e,t){e.exports=require("fastify")},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.typesRoutes=t.messageRoutes=t.productRoutes=void 0;const i=r(n(6));t.productRoutes=i.default;const s=r(n(10));t.messageRoutes=s.default;const a=r(n(13));t.typesRoutes=a.default},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(7));t.default=async function(e){e.get("/",i.default.index),e.get("/promotion/",i.default.indexInPromotions),e.get("/:id",i.default.show),e.put("/like/:id",i.default.likeAProduct),e.put("/deslike/:id",i.default.deslikeAProduct)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(8));t.default=new class{async index(e,t){const{filters:n,scale:r}=e.query;if(console.log(n),"like"===n){return await i.default.getByMostLiked()}if("price"===n&&"desc"===r){return await i.default.getHighPrice()}if("asc"===r){return await i.default.getLowPrice()}return await i.default.index()}async indexInPromotions(e,t){return await i.default.getProductInPromotions()}async likeAProduct(e,t){const{id:n}=e.params;return await i.default.likeAProduct(parseInt(n))?t.send({code:200,error:!1,message:["Succefull Liked!"]}):t.status(404).send({code:404,error:!0,message:["content not founded!"]})}async deslikeAProduct(e,t){const{id:n}=e.params;return await i.default.deslikeAProduct(parseInt(n))?t.send({code:200,error:!1,message:["Succefull Desliked!"]}):t.status(404).send({code:404,error:!0,message:["content not founded!"]})}async show(e,t){const{id:n}=e.params,r=await i.default.show(parseInt(n));return r?t.send({code:200,error:!1,payload:[r]}):t.status(404).send({code:404,error:!0,message:["content not founded!"]})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=new class{async show(e){try{return await r.db.tbl_product.findUnique({where:{id:e}})}catch(e){return!1}}async likeAProduct(e){try{return await r.db.tbl_product.update({data:{likes:{increment:1}},where:{id:e}}),!0}catch(e){return!1}}async deslikeAProduct(e){try{return await r.db.tbl_product.update({data:{likes:{decrement:1}},where:{id:e}}),!0}catch(e){return!1}}async getByMostLiked(){const e=await r.db.tbl_product.findMany({include:{tbl_drink:{include:{tbl_drink_type:!0}},tbl_pizza:{include:{tbl_pizza_ingredient:!0,tbl_pizza_stuffing:!0,tbl_pizza_type:!0}}},orderBy:{likes:"desc"},where:{status:!0}}),t=[];return e.forEach(e=>{if(e.tbl_drink.length<=0){const n=e;delete n.tbl_drink,t.push(n)}else{const n=e;delete n.tbl_pizza,t.push(n)}}),t}async index(){const e=await r.db.tbl_product.findMany({include:{tbl_drink:{include:{tbl_drink_type:!0}},tbl_pizza:{include:{tbl_pizza_ingredient:!0,tbl_pizza_stuffing:!0,tbl_pizza_type:!0}}},where:{status:!0}}),t=[];return e.forEach(e=>{if(e.tbl_drink.length<=0){const n=e;delete n.tbl_drink,t.push(n)}else{const n=e;delete n.tbl_pizza,t.push(n)}}),t}async getProductInPromotions(){const e=await r.db.tbl_sale_off_products.findMany({include:{tbl_product:{include:{tbl_drink:{include:{tbl_drink_type:!0}},tbl_pizza:{include:{tbl_pizza_ingredient:!0,tbl_pizza_stuffing:!0,tbl_pizza_type:!0}}}}},where:{tbl_product:{status:!0}}}),t=[];return e.forEach(e=>{var n;if((null===(n=e.tbl_product)||void 0===n?void 0:n.tbl_drink.length)<=0){const n=e;delete n.tbl_product.tbl_drink,t.push(n)}else{const n=e;delete n.tbl_product.tbl_pizza,t.push(n)}}),e}async getLowPrice(){const e=await r.db.tbl_product.findMany({include:{tbl_drink:{include:{tbl_drink_type:!0}},tbl_pizza:{include:{tbl_pizza_ingredient:!0,tbl_pizza_stuffing:!0,tbl_pizza_type:!0}}},where:{status:!0},orderBy:{price:"asc"}}),t=[];return e.forEach(e=>{if(e.tbl_drink.length<=0){const n=e;delete n.tbl_drink,t.push(n)}else{const n=e;delete n.tbl_pizza,t.push(n)}}),t}async getHighPrice(){const e=await r.db.tbl_product.findMany({include:{tbl_drink:{include:{tbl_drink_type:!0}},tbl_pizza:{include:{tbl_pizza_ingredient:!0,tbl_pizza_stuffing:!0,tbl_pizza_type:!0}}},where:{status:!0},orderBy:{price:"desc"}}),t=[];return e.forEach(e=>{if(e.tbl_drink.length<=0){const n=e;delete n.tbl_drink,t.push(n)}else{const n=e;delete n.tbl_pizza,t.push(n)}}),t}}},function(e,t){e.exports=require("@prisma/client")},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(11)),s={type:"object",required:["name","email","phone","cellphone","content","critica"],properties:{name:{type:"string"},email:{type:"string"},phone:{type:"string"},cellphone:{type:"string"},content:{type:"string"},critica:{type:"boolean"}}},a={type:"object",body:{Message:s},reponse:{200:{type:"object",properties:{statusCode:{type:"number"},payload:{type:"array",items:{Message:s}},error:{type:"boolean"}}}}};t.default=async function(e){e.post("/",{schema:a},i.default.save)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(12));t.default=new class{async save(e,t){const{name:n,email:r,phone:s,cellphone:a,critica:o,content:u}=e.body,d={name:n,email:r,phone:s,cellphone:a,critica:o,content:u,id:-1},l=await i.default.save(d);return t.send({code:200,payload:[l],error:!1})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=new class{async save(e){return await r.db.tbl_message.create({data:{cellphone:e.cellphone,content:e.content,critica:e.critica,email:e.email,name:e.name,phone:e.phone}})}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(14));t.default=async function(e){e.get("/pizza",i.default.indexOfPizzaTypes),e.get("/pizza/stuffing",i.default.indexOfPizzaStuffing),e.get("/drink",i.default.indexOfDrinkTypes)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(15));t.default=new class{async indexOfPizzaTypes(e,t){const n=await i.default.getPizzaTypes();return t.send({code:200,error:!1,payload:n})}async indexOfPizzaStuffing(e,t){const n=await i.default.getPizzaStuffing();return t.send({code:200,error:!1,payload:n})}async indexOfDrinkTypes(e,t){const n=await i.default.getDrinkTypes();return t.send({code:200,error:!1,payload:n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.default=new class{async getPizzaTypes(){return await r.db.tbl_pizza_type.findMany()}async getPizzaStuffing(){return await r.db.tbl_stuffing.findMany()}async getDrinkTypes(){return await r.db.tbl_drink_type.findMany()}}},function(e,t,n){"use strict";n.r(t),n.d(t,"handler",(function(){return o}));var r=n(1),i=n.n(r),s=n(2);const a=n.n(s).a.Instance.server,o=i()(a)}]));